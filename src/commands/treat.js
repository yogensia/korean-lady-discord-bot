const common = require('../utils/common')
const math = require('../utils/math')
const random = require('../utils/random')

// Treat adjectives.
const adjectives = [
  'Aesthetic',
  'Aromatic',
  'Beautiful',
  'Caramelised',
  'Carefully Crafted',
  'Classy',
  'Crisp',
  'Delicious',
  'Dripping',
  'Famous',
  'Fantastic',
  'Fleshy',
  'Fluffy',
  'Fragant',
  'Fragile',
  'Fresh',
  'Fruity',
  'Funny Looking',
  'Generous',
  'Giant',
  'Gourmet',
  'Grandma\'s',
  'Heart Shaped',
  'Heavenly',
  'Homemade',
  'Iconic',
  'Intense',
  'Intricate',
  'Juicy',
  'Lively',
  'Lovely',
  'Luscious',
  'Mini',
  'Massive',
  'Next Level',
  'Rainbow',
  'Squishy',
  'Sparkling',
  'Spicy',
  'Sprinkled',
  'Sticky',
  'Top Tier',
  'Traditional',
  'Triple Layered',
  'Ultimate'
]

// Treat flavours.
const flavours = [
  'Almond & Honey',
  'Almond Liqueur',
  'Amaretto',
  'Bacon',
  'Baileys',
  'Butter-Stuffed',
  'Butterscotch Liqueur',
  'Cherry',
  'Chocolate',
  'Chocolate Bark',
  'Chocolate Chip',
  'Chocolate Hazelnut',
  'Cinnamon-Honey',
  'Cocktail',
  'Cranberry',
  'Cream',
  'Dewberry',
  'Eggnog-dipped',
  'Elderberry',
  'Gingerbread',
  'Ginseng',
  'Honey',
  'Japanese Milk',
  'Kahlúa',
  'Loganberry',
  'Macchiato',
  'Maltesers',
  'Martini',
  'Mint',
  'Nutella',
  'Oreo',
  'Peanut Butter',
  'Peppermint',
  'Pistachio',
  'Poppyseed',
  'Rice',
  'Raspberry',
  'Red Berry',
  'Red Wine',
  'Honey Rum',
  'Salted Caramel',
  'Salted Toffee',
  'Tiramisu',
  'Vanilla',
  'Walnut',
  'White and Golden Raspberry',
  'White Chocolate'
]

// Treats.
const treats = [
  ['🍎', 'Apple Crisp'],
  ['🍎', 'Apple Pockets'],
  ['🥯', 'Bagels'],
  ['🍞', 'Banana Bread'],
  ['🍞', 'Bread'],
  ['🍞', 'Brioche Bread'],
  ['🍞', 'Melon Bread'],
  ['🍞', 'Tartine Bread'],
  ['🧁', 'Crème Brûlée'],
  ['🍫', 'Brownies'],
  ['🍰', 'Angel Food Cakes'],
  ['🍰', 'Cakes'],
  ['🍬', 'Candy'],
  ['🍰', 'Cheese Cake'],
  ['🍪', 'Cookies'],
  ['🥥', 'Coconuts'],
  ['🥐', 'Croissants'],
  ['🧁', 'Cupcakes'],
  ['🍩', 'Doughnuts'],
  ['🍕', 'Fruit Pizza'],
  ['🥚', 'Poached Eggs'],
  ['🥠', 'Fortune Cookies'],
  ['🍦', 'Icecream'],
  ['🍋', 'Lemon Meringue'],
  ['🍭', 'Lollipops'],
  ['🧁', 'Macaroons'],
  ['🥝', 'Kiwis'],
  ['🍈', 'Melon'],
  ['🥮', 'Moon Cakes'],
  ['🧁', 'Mousse Cups'],
  ['🧁', 'Muffins'],
  ['🥞', 'Pancakes'],
  ['🍍', 'Pineapple Cobbler'],
  ['🍍', 'Pineapple Whip'],
  ['🥧', 'Pie'],
  ['🥨', 'Pretzels'],
  ['🍐', 'Poached Pears'],
  ['🥭', 'Poached Mangos'],
  ['🍮', 'Pudding'],
  ['🍨', 'Trifles'],
  ['🍘', 'Rice Crackers'],
  ['🍠', 'Sweet Potatoes'],
  ['🍓', 'Strawberry Fluff'],
  ['🧇', 'Waffles'],
  ['🍉', 'Watermelon']
]

const construct = (client, msg, args) => {
  // Get subject from args.
  const subject = common.stripMentions(args.join(' '), msg)

  // Ramdomize intro.
  const intro = random.exclamation()

  // Ramdomize treat.
  const adjective = math.getRandomStringFromArray(adjectives, false)
  const flavour = math.getRandomStringFromArray(flavours, false)
  const treat = math.getRandomStringFromArray(treats, false)

  let message
  if (subject) {
    message = `${intro} ${common.displayName(msg)} is treating **${subject}** to...\n${treat[0]} **${adjective} ${flavour} ${treat[1]}!**`
  } else {
    const randomSubject = common.randomSubject()

    message = `${intro} ${common.displayName(msg)} is treating **${randomSubject}** to...\n${treat[0]} **${adjective} ${flavour} ${treat[1]}!**`
  }

  // Return message.
  return message
}

const slash = (client, msg, interaction, args) => {
  // Reply with an embed message.
  common.interactionReply(interaction, construct(client, msg, args))
}

const run = (client, msg, args) => {
  // Reply with an embed message.
  common.sendEmbed(msg, construct(client, msg, args))
}

module.exports = {
  name: 'treat',
  desc: 'Give someone a treat. If no subject is provided, the treat will be for everyone!\n\nTreats are randomly generated by a super secret special algorithm, only with the highest quality ingredients. By being gifted a treat you enter a non-negotiable contract and are legally obligated to stop what you are doing and eat. Treats may contain traces of pineapple.',
  aliases: ['dessert'],
  usage: 'treat [subject]',
  examples: ['treat', 'treat @KoreanLady', 'treat the queen of England'],
  slash_command: {
    description: 'Gives someone a delicious treat',
    options: [
      {
        name: 'target',
        value: 'target',
        description: 'Who are you going to give a treat to?',
        type: 3,
        required: false
      }
    ]
  },
  slash,
  run
}
